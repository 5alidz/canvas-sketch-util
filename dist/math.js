var lerp = require('lerp');
var inverseLerp = require('unlerp');
var clamp = require('clamp');
var defined = require('defined');

var toFinite = function (n, defaultValue) {
  if ( defaultValue === void 0 ) defaultValue = 0;

  return typeof n === 'number' && isFinite(n) ? n : defaultValue;
};

var expandVector = function (dims) {
  return function (p, defaultValue) {
    if ( defaultValue === void 0 ) defaultValue = 0;

    var scalar;
    if (p == null) {
      // No vector, create a default one
      scalar = defaultValue;
    } else if (typeof p === 'number' && isFinite(p)) {
      // Expand single channel to multiple vector
      scalar = p;
    }

    var out = [];
    if (scalar == null) {
      for (var i = 0; i < dims; i++) {
        out[i] = toFinite(p[i], defaultValue);
      }
    } else {
      for (var i$1 = 0; i$1 < dims; i$1++) {
        out[i$1] = scalar;
      }
    }
    return out;
  };
};

var lerpArray = function (min, max, t, out) {
  if ( out === void 0 ) out = [];

  if (min.length !== max.length) {
    throw new Error('min and max array are expected to have the same length');
  }
  for (var i = 0; i < min.length; i++) {
    out[i] = lerp(min[i], max[i], t);
  }
  return out;
};

var newArray = function (n, initialValue) {
  if ( n === void 0 ) n = 0;

  var out = [];
  for (var i = 0; i < n; i++) { out.push(initialValue); }
  return out;
};

var linspace = function (n, opts) {
  if ( n === void 0 ) n = 0;
  if ( opts === void 0 ) opts = {};

  if (typeof opts === 'boolean') {
    opts = { endpoint: true };
  }
  var offset = defined(opts.offset, 0);
  return opts.endpoint
    ? newArray(n).map(function (_, i) { return n <= 1 ? 0 : ((i + offset) / (n - 1)); })
    : newArray(n).map(function (_, i) { return (i + offset) / n; });
};

var mod = function (a, b) { return ((a % b) + b) % b; };

var lerpKeyframes = function (values, t) {
  t = mod(t, 1);

  var len = values.length - 1;
  var whole = t * len;
  var frame = Math.floor(whole);
  var fract = whole - frame;

  var nextFrame = Math.min(frame + 1, len);
  var a = values[frame];
  var b = values[nextFrame];
  return lerp(a, b, fract);
};

module.exports = {
  linspace: linspace,
  lerpArray: lerpArray,
  lerp: lerp,
  inverseLerp: inverseLerp,
  lerpKeyframes: lerpKeyframes,
  clamp: clamp,
  mod: mod,
  clamp01: function (v) { return clamp(v, 0, 1); },
  smoothstep: require('smoothstep'),
  expand2D: expandVector(2),
  expand3D: expandVector(3),
  expand4D: expandVector(4)
};

// clamp
// clamp01
// closestPowerOfTwo
// colorTemperatureToRGB
// deltaAngle
// inverseLerp
// lerpAngle
// isPowerOfTwo
// lerpUnclamped
// gammaToLinearSpace
// linearToGammaSpace
// nextPowerOfTwo
// sign
// fract
// lerp
// smoothStep / smoothstep
// smoothDamp
// smoothDampAngle
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0aC5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL21hdGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbGVycCA9IHJlcXVpcmUoJ2xlcnAnKTtcbmNvbnN0IGludmVyc2VMZXJwID0gcmVxdWlyZSgndW5sZXJwJyk7XG5jb25zdCBjbGFtcCA9IHJlcXVpcmUoJ2NsYW1wJyk7XG5jb25zdCBkZWZpbmVkID0gcmVxdWlyZSgnZGVmaW5lZCcpO1xuXG5jb25zdCB0b0Zpbml0ZSA9IChuLCBkZWZhdWx0VmFsdWUgPSAwKSA9PiB7XG4gIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUobikgPyBuIDogZGVmYXVsdFZhbHVlO1xufTtcblxuY29uc3QgZXhwYW5kVmVjdG9yID0gZGltcyA9PiB7XG4gIHJldHVybiAocCwgZGVmYXVsdFZhbHVlID0gMCkgPT4ge1xuICAgIGxldCBzY2FsYXI7XG4gICAgaWYgKHAgPT0gbnVsbCkge1xuICAgICAgLy8gTm8gdmVjdG9yLCBjcmVhdGUgYSBkZWZhdWx0IG9uZVxuICAgICAgc2NhbGFyID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHAgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHApKSB7XG4gICAgICAvLyBFeHBhbmQgc2luZ2xlIGNoYW5uZWwgdG8gbXVsdGlwbGUgdmVjdG9yXG4gICAgICBzY2FsYXIgPSBwO1xuICAgIH1cblxuICAgIGNvbnN0IG91dCA9IFtdO1xuICAgIGlmIChzY2FsYXIgPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW1zOyBpKyspIHtcbiAgICAgICAgb3V0W2ldID0gdG9GaW5pdGUocFtpXSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW1zOyBpKyspIHtcbiAgICAgICAgb3V0W2ldID0gc2NhbGFyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9O1xufTtcblxuY29uc3QgbGVycEFycmF5ID0gKG1pbiwgbWF4LCB0LCBvdXQgPSBbXSkgPT4ge1xuICBpZiAobWluLmxlbmd0aCAhPT0gbWF4Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWluIGFuZCBtYXggYXJyYXkgYXJlIGV4cGVjdGVkIHRvIGhhdmUgdGhlIHNhbWUgbGVuZ3RoJyk7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW4ubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRbaV0gPSBsZXJwKG1pbltpXSwgbWF4W2ldLCB0KTtcbiAgfVxuICByZXR1cm4gb3V0O1xufTtcblxuY29uc3QgbmV3QXJyYXkgPSAobiA9IDAsIGluaXRpYWxWYWx1ZSkgPT4ge1xuICBjb25zdCBvdXQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIG91dC5wdXNoKGluaXRpYWxWYWx1ZSk7XG4gIHJldHVybiBvdXQ7XG59O1xuXG5jb25zdCBsaW5zcGFjZSA9IChuID0gMCwgb3B0cyA9IHt9KSA9PiB7XG4gIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0cyA9IHsgZW5kcG9pbnQ6IHRydWUgfTtcbiAgfVxuICBjb25zdCBvZmZzZXQgPSBkZWZpbmVkKG9wdHMub2Zmc2V0LCAwKTtcbiAgcmV0dXJuIG9wdHMuZW5kcG9pbnRcbiAgICA/IG5ld0FycmF5KG4pLm1hcCgoXywgaSkgPT4gbiA8PSAxID8gMCA6ICgoaSArIG9mZnNldCkgLyAobiAtIDEpKSlcbiAgICA6IG5ld0FycmF5KG4pLm1hcCgoXywgaSkgPT4gKGkgKyBvZmZzZXQpIC8gbik7XG59O1xuXG5jb25zdCBtb2QgPSAoYSwgYikgPT4gKChhICUgYikgKyBiKSAlIGI7XG5cbmNvbnN0IGxlcnBLZXlmcmFtZXMgPSAodmFsdWVzLCB0KSA9PiB7XG4gIHQgPSBtb2QodCwgMSk7XG5cbiAgY29uc3QgbGVuID0gdmFsdWVzLmxlbmd0aCAtIDE7XG4gIGNvbnN0IHdob2xlID0gdCAqIGxlbjtcbiAgY29uc3QgZnJhbWUgPSBNYXRoLmZsb29yKHdob2xlKTtcbiAgY29uc3QgZnJhY3QgPSB3aG9sZSAtIGZyYW1lO1xuXG4gIGNvbnN0IG5leHRGcmFtZSA9IE1hdGgubWluKGZyYW1lICsgMSwgbGVuKTtcbiAgY29uc3QgYSA9IHZhbHVlc1tmcmFtZV07XG4gIGNvbnN0IGIgPSB2YWx1ZXNbbmV4dEZyYW1lXTtcbiAgcmV0dXJuIGxlcnAoYSwgYiwgZnJhY3QpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxpbnNwYWNlLFxuICBsZXJwQXJyYXksXG4gIGxlcnAsXG4gIGludmVyc2VMZXJwLFxuICBsZXJwS2V5ZnJhbWVzLFxuICBjbGFtcCxcbiAgbW9kLFxuICBjbGFtcDAxOiAodikgPT4gY2xhbXAodiwgMCwgMSksXG4gIHNtb290aHN0ZXA6IHJlcXVpcmUoJ3Ntb290aHN0ZXAnKSxcbiAgZXhwYW5kMkQ6IGV4cGFuZFZlY3RvcigyKSxcbiAgZXhwYW5kM0Q6IGV4cGFuZFZlY3RvcigzKSxcbiAgZXhwYW5kNEQ6IGV4cGFuZFZlY3Rvcig0KVxufTtcblxuLy8gY2xhbXBcbi8vIGNsYW1wMDFcbi8vIGNsb3Nlc3RQb3dlck9mVHdvXG4vLyBjb2xvclRlbXBlcmF0dXJlVG9SR0Jcbi8vIGRlbHRhQW5nbGVcbi8vIGludmVyc2VMZXJwXG4vLyBsZXJwQW5nbGVcbi8vIGlzUG93ZXJPZlR3b1xuLy8gbGVycFVuY2xhbXBlZFxuLy8gZ2FtbWFUb0xpbmVhclNwYWNlXG4vLyBsaW5lYXJUb0dhbW1hU3BhY2Vcbi8vIG5leHRQb3dlck9mVHdvXG4vLyBzaWduXG4vLyBmcmFjdFxuLy8gbGVycFxuLy8gc21vb3RoU3RlcCAvIHNtb290aHN0ZXBcbi8vIHNtb290aERhbXBcbi8vIHNtb290aERhbXBBbmdsZSJdLCJuYW1lcyI6WyJjb25zdCIsImkiLCJsZXQiXSwibWFwcGluZ3MiOiJBQUFBQSxHQUFLLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QkEsR0FBSyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdENBLEdBQUssQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9CQSxHQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFbkNBLEdBQUssQ0FBQyxRQUFRLFlBQUcsQ0FBQyxDQUFDLEVBQUUsWUFBZ0IsRUFBRSxBQUFHOzZDQUFULEdBQUc7QUFBTztFQUN6QyxPQUFPLE9BQU8sQ0FBQyxLQUFLLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFlBQVksQ0FBQztDQUNoRSxDQUFDOztBQUVGQSxHQUFLLENBQUMsWUFBWSxhQUFHLEtBQUksQ0FBQyxBQUFHO0VBQzNCLGdCQUFPLENBQUMsQ0FBQyxFQUFFLFlBQWdCLEVBQUUsQUFBRzsrQ0FBVCxHQUFHO0FBQU87SUFDL0JFLEdBQUcsQ0FBQyxNQUFNLENBQUM7SUFDWCxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUU7O01BRWIsTUFBTSxHQUFHLFlBQVksQ0FBQztLQUN2QixNQUFNLElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTs7TUFFL0MsTUFBTSxHQUFHLENBQUMsQ0FBQztLQUNaOztJQUVERixHQUFLLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNmLElBQUksTUFBTSxJQUFJLElBQUksRUFBRTtNQUNsQixLQUFLRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzdCLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO09BQ3ZDO0tBQ0YsTUFBTTtNQUNMLEtBQUtBLEdBQUcsQ0FBQ0QsR0FBQyxHQUFHLENBQUMsRUFBRUEsR0FBQyxHQUFHLElBQUksRUFBRUEsR0FBQyxFQUFFLEVBQUU7UUFDN0IsR0FBRyxDQUFDQSxHQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7T0FDakI7S0FDRjtJQUNELE9BQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQztDQUNILENBQUM7O0FBRUZELEdBQUssQ0FBQyxTQUFTLFlBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFRLEVBQUUsQUFBRzsyQkFBVixHQUFHO0FBQVE7RUFDNUMsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLEdBQUcsQ0FBQyxNQUFNLEVBQUU7SUFDN0IsTUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO0dBQzNFO0VBQ0QsS0FBS0UsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDbkMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0dBQ2xDO0VBQ0QsT0FBTyxHQUFHLENBQUM7Q0FDWixDQUFDOztBQUVGRixHQUFLLENBQUMsUUFBUSxZQUFHLENBQUMsQ0FBSyxFQUFFLFlBQVksRUFBRSxBQUFHO3VCQUF2QixHQUFHO0FBQXFCO0VBQ3pDQSxHQUFLLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztFQUNmLEtBQUtFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBQztFQUNuRCxPQUFPLEdBQUcsQ0FBQztDQUNaLENBQUM7O0FBRUZGLEdBQUssQ0FBQyxRQUFRLFlBQUcsQ0FBQyxDQUFLLEVBQUUsSUFBUyxFQUFFLEFBQUc7dUJBQXBCLEdBQUc7NkJBQU8sR0FBRztBQUFRO0VBQ3RDLElBQUksT0FBTyxJQUFJLEtBQUssU0FBUyxFQUFFO0lBQzdCLElBQUksR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztHQUMzQjtFQUNEQSxHQUFLLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3ZDLE9BQU8sSUFBSSxDQUFDLFFBQVE7TUFDaEIsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFDLENBQUM7TUFDaEUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxJQUFDLENBQUMsQ0FBQztDQUNqRCxDQUFDOztBQUVGQSxHQUFLLENBQUMsR0FBRyxZQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBQyxDQUFDOztBQUV4Q0EsR0FBSyxDQUFDLGFBQWEsWUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQUFBRztFQUNuQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7RUFFZEEsR0FBSyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztFQUM5QkEsR0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO0VBQ3RCQSxHQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7RUFDaENBLEdBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQzs7RUFFNUJBLEdBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQzNDQSxHQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztFQUN4QkEsR0FBSyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7RUFDNUIsT0FBTyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUMxQixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUc7WUFDZixRQUFRO2FBQ1IsU0FBUztRQUNULElBQUk7ZUFDSixXQUFXO2lCQUNYLGFBQWE7U0FDYixLQUFLO09BQ0wsR0FBRztFQUNILE9BQU8sV0FBRSxDQUFDLENBQUMsRUFBRSxTQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBQztFQUM5QixVQUFVLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQztFQUNqQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztFQUN6QixRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztFQUN6QixRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztDQUMxQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OyJ9